# 機能仕様書: カタログ閲覧機能

**フィーチャーブランチ**: `001-catalog-listing`
**作成日**: 2026-02-09
**ステータス**: ドラフト
**入力**: ユーザー説明: "購入者が商品カタログを閲覧できる機能。認証不要で閲覧可能。商品一覧表示、商品詳細表示、商品検索を含む。"

## ユーザーシナリオとテスト *(必須)*

### ユーザーストーリー 1 - 商品一覧の閲覧 (優先度: P1)

購入者として、商品一覧ページにアクセスし、登録済みの商品をカード形式で一覧表示できる。各カードには商品画像・商品名・価格・在庫状況が表示される。1ページあたり12件表示され、12件を超える場合はページネーションで次ページに移動できる。

**優先度の理由**: 商品一覧はカタログ閲覧の基本機能であり、これがなければ購入者は商品を見つけることができない。他のすべての機能（詳細表示・検索）の前提となるため最優先。

**独立テスト**: 商品一覧ページにアクセスし、商品カードが正しく表示されること、ページネーションで次ページに遷移できることを確認すれば、単独で価値を提供できる。

**受入シナリオ**:

1. **前提** 商品が13件以上登録されている状態で、**操作** 購入者が商品一覧ページにアクセスする、**結果** 最初の12件がカード形式で表示され、ページネーションが表示される
2. **前提** 商品一覧の1ページ目を表示している状態で、**操作** 購入者が次ページのページネーションをクリックする、**結果** 13件目以降の商品が表示される
3. **前提** 在庫が0の商品が存在する状態で、**操作** 購入者が商品一覧ページにアクセスする、**結果** 在庫0の商品カードに「在庫切れ」と表示される
4. **前提** 商品が1件も登録されていない状態で、**操作** 購入者が商品一覧ページにアクセスする、**結果** 「商品がありません」というメッセージが表示される
5. **前提** 商品が12件以下登録されている状態で、**操作** 購入者が商品一覧ページにアクセスする、**結果** 全件がカード形式で表示され、ページネーションは表示されない

---

### ユーザーストーリー 2 - 商品詳細の確認 (優先度: P2)

購入者として、商品一覧から任意の商品を選択し、商品詳細画面で商品画像・商品名・価格・説明文・在庫数を確認できる。在庫がある商品にはカート追加ボタンが有効表示され、在庫切れの商品はカート追加ボタンが無効化される。

**優先度の理由**: 商品詳細はカタログ閲覧の重要な機能であり、購入者が商品の詳細情報を確認して購入判断を行うために不可欠。一覧表示の次に優先すべき機能。

**独立テスト**: 商品詳細ページにアクセスし、すべての商品情報が正しく表示されること、在庫状況に応じてカート追加ボタンの有効/無効が切り替わることを確認すれば、単独で価値を提供できる。

**受入シナリオ**:

1. **前提** 在庫がある商品が存在する状態で、**操作** 購入者が商品一覧から商品を選択する、**結果** 商品詳細画面に商品画像・商品名・価格・説明文・在庫数が表示され、カート追加ボタンが有効である
2. **前提** 在庫が0の商品が存在する状態で、**操作** 購入者が在庫切れ商品の詳細画面を開く、**結果** カート追加ボタンが無効化されている
3. **前提** 商品画像が未設定の商品が存在する状態で、**操作** 購入者がその商品の詳細画面を開く、**結果** プレースホルダー画像が表示される

---

### ユーザーストーリー 3 - 商品検索 (優先度: P3)

購入者として、キーワードを入力して商品名・説明文を対象に検索し、目的の商品を素早く見つけることができる。該当する商品がない場合はメッセージが表示される。検索条件をクリアすると全商品一覧に戻ることができる。

**優先度の理由**: 検索機能は商品数が多い場合のユーザビリティ向上に重要だが、一覧表示と詳細表示がなければ検索結果を活用できないため、P3とする。

**独立テスト**: 検索バーにキーワードを入力して検索を実行し、一致する商品のみがフィルタリングされて表示されること、クリアボタンで全件表示に戻ることを確認すれば、単独で価値を提供できる。

**受入シナリオ**:

1. **前提** 商品が複数登録されている状態で、**操作** 購入者が商品名に含まれるキーワードで検索する、**結果** 商品名にキーワードを含む商品のみが表示される
2. **前提** 商品が複数登録されている状態で、**操作** 購入者が説明文に含まれるキーワードで検索する、**結果** 説明文にキーワードを含む商品のみが表示される
3. **前提** 商品が複数登録されている状態で、**操作** 購入者がどの商品にも該当しないキーワードで検索する、**結果** 「該当する商品がありません」というメッセージが表示される
4. **前提** 検索結果が表示されている状態で、**操作** 購入者が検索条件をクリアする、**結果** 全商品一覧に戻る

---

### エッジケース

- 商品が0件の場合、ページネーションは表示されず「商品がありません」メッセージのみ表示される
- 在庫が0の商品は一覧で「在庫切れ」表示、詳細画面でカート追加ボタンが無効化される
- 商品画像が未設定の場合、一覧・詳細ともにプレースホルダー画像が表示される
- 検索結果が12件を超える場合、検索結果にもページネーションが適用される
- 検索キーワードが空文字の場合、全商品一覧と同じ結果が返される
- ページネーションで存在しないページ番号を指定した場合、1ページ目にリダイレクトされる

## 要件 *(必須)*

### 機能要件

- **FR-001**: システムは商品一覧をカード形式で表示しなければならない（各カードに商品画像・商品名・価格・在庫状況を含む）
- **FR-002**: システムは商品一覧を1ページあたり12件で表示しなければならない
- **FR-003**: システムは12件を超える商品がある場合、ページネーションを表示しなければならない
- **FR-004**: システムは在庫が0の商品に対して「在庫切れ」と表示しなければならない
- **FR-005**: システムは商品が0件の場合「商品がありません」と表示しなければならない
- **FR-006**: システムは商品詳細画面で商品画像・商品名・価格・説明文・在庫数を表示しなければならない
- **FR-007**: システムは在庫がある商品の詳細画面でカート追加ボタンを有効表示しなければならない
- **FR-008**: システムは在庫が0の商品の詳細画面でカート追加ボタンを無効化しなければならない
- **FR-009**: システムは商品画像が未設定の場合、プレースホルダー画像を表示しなければならない
- **FR-010**: システムはキーワードによる商品検索機能を提供しなければならない（商品名・説明文を対象）
- **FR-011**: システムは検索結果が0件の場合、該当なしのメッセージを表示しなければならない
- **FR-012**: システムは検索条件のクリア機能を提供し、クリア後は全商品一覧に戻らなければならない
- **FR-013**: システムは認証なしでカタログ閲覧機能へのアクセスを許可しなければならない
- **FR-014**: カート追加ボタンは詳細画面に表示するが、カート機能自体の実装はスコープ外とする

### 主要エンティティ

- **商品（Product）**: 商品カタログの中核エンティティ。商品名、価格、説明文、在庫数、商品画像を属性として持つ。購入者が閲覧・検索する対象。
- **商品一覧ページ（Product List Page）**: 商品をカード形式で一覧表示するビュー。12件単位のページネーションを持ち、検索フィルタリングが適用される。

## 成功基準 *(必須)*

### 測定可能な成果

- **SC-001**: 購入者が商品一覧ページを開いてから商品カードが表示されるまで2秒以内
- **SC-002**: 購入者が3回以内のページ操作で任意の商品の詳細情報にたどり着ける
- **SC-003**: 購入者がキーワード入力から検索結果表示まで2秒以内で完了できる
- **SC-004**: 初回訪問の購入者が操作説明なしで商品一覧の閲覧・詳細確認・検索を実行できる
- **SC-005**: すべての商品情報（画像・名前・価格・在庫状況）が一覧・詳細画面で正確に表示される

## 前提事項

- 商品データは事前にシステムに登録済みであること
- カート機能自体の実装はスコープ外（ボタン表示のみ）
- カテゴリフィルタ機能はスコープ外
- ソート機能はスコープ外
- 認証は不要（誰でもカタログを閲覧可能）
- 検索はキーワードによる部分一致検索とする（完全一致や高度な検索機能はスコープ外）
- 価格の通貨は日本円（¥）とする
