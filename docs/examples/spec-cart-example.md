# Speckit 入力例 - カート管理機能

各コマンドへの入力例です。出力は各コマンドがテンプレートに従って自動生成します。

---

## 1. `/speckit.specify` の入力

自然言語で機能の WHAT（何を）と WHY（なぜ）を記述します。
実装詳細（UI構成・API設計・ディレクトリ構成など）は含めません。

```text
/speckit.specify
# カート管理機能
購入者が商品をカートに追加し、購入前に内容を確認・編集できる機能。購入者（buyer）ログインが必須。

## カートに商品を追加
商品詳細ページから「カートに追加」ボタンで商品をカートに追加できる。
同一商品を再度追加した場合は数量が自動的に増加する。
在庫切れの商品はカート追加ボタンを無効化する。二重送信を防止する。
追加成功時にフィードバックを表示し、ヘッダーのカートアイコンの件数を更新する。

## カート内容の確認
カートページで商品一覧（商品画像・商品名・単価・数量・小計）を確認できる。
合計金額として商品合計・消費税（10%、端数切り捨て）・総合計を表示する。
カートが空の場合は「カートに商品がありません」メッセージと商品一覧への導線を表示する。

## 数量変更
カート内の商品数量を1〜99の範囲かつ在庫数以下で変更でき、小計・合計が即時更新される。
在庫数を超える数量には変更できず、エラーメッセージを表示する。

## 商品の削除
カートから商品を削除できる。削除前に確認ダイアログを表示する。
最後の商品を削除するとカートが空になり、空状態メッセージを表示する。

## カート内容の永続化
カートの内容はページ遷移やブラウザリロード後も保持される。

## 前提
カタログ機能が実装済み。消費税は一律10%（軽減税率対象外）。
カート操作には購入者（buyer）としてのログインが必要。未ログイン時はログインページにリダイレクトし、ログイン後は元のページに戻る。
カートの永続化はインメモリとし、DB永続化は将来フェーズとする。
仕様書は、見出し・本文ともにすべて日本語で作成すること。
```

→ spec.md が自動生成される（User Stories, Requirements, Success Criteria）

---

## 2. `/speckit.plan` の入力

spec.md は自動で読み込まれるため、追加の設計指示がある場合のみ引数を渡します。

```text
/speckit.plan
テスト駆動開発を徹底する。
src/domains/cart/ のスタブ（NotImplementedError / プレースホルダー）を本番実装に置き換える。src/contracts/ に準拠し、src/samples/ を参考に実装する。
本番ページ（src/app/(buyer)/cart/）と API Routes（src/app/api/cart/）は配置済み。@/domains/ のスタブ置換後に自動的に動作する。
購入者レイアウト（src/app/(buyer)/layout.tsx）の navLinks コメントを解除してカートリンクを有効化する。
計画書の見出し・本文・箇条書きなど、すべて日本語で記述すること。
```

引数なしでも実行可能（spec.md の内容だけで plan.md を生成）。

→ plan.md, research.md, data-model.md, contracts/ 等が自動生成される

---

## 3. `/speckit.tasks` の入力

spec.md + plan.md は自動で読み込まれるため、追加の指示がある場合のみ引数を渡します。

```text
/speckit.tasks
TDDアプローチで、各ユースケースにテストタスクを含める。
ユーザーストーリー単位でフェーズを分割し、各ストーリーを独立して実装・テスト可能にする。
各タスクのタイトルと説明、完了条件など、すべて日本語で記述すること。
```

引数なしでも実行可能（spec.md + plan.md の内容だけで tasks.md を生成）。

→ tasks.md が自動生成される（フェーズ別・ユーザーストーリー別のタスク一覧）
